{"openapi":"3.0.2","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/users/login":{"post":{"summary":"Login","description":"Log in to Firebase with email, password. Return token if successful.","operationId":"login_users_login_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users":{"get":{"summary":"Get All","description":"Retrieve details for all users matching a search criteria.","operationId":"get_all_users_get","parameters":[{"required":false,"schema":{"title":"Username","type":"string"},"name":"username","in":"query"},{"required":false,"schema":{"title":"Latitude","type":"number"},"name":"latitude","in":"query"},{"required":false,"schema":{"title":"Longitude","type":"number"},"name":"longitude","in":"query"},{"required":false,"schema":{"title":"Radius","type":"integer","default":1000},"name":"radius","in":"query"},{"required":false,"schema":{"title":"Offset","type":"integer","default":0},"name":"offset","in":"query"},{"required":false,"schema":{"title":"Limit","type":"integer","default":10},"name":"limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"summary":"Create","description":"Create new user in Firebase, add it to the database if successful.","operationId":"create_users_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/usersIDP":{"post":{"summary":"Create Idp User","description":"Create new user with federated identity in database.","operationId":"create_idp_user_users_usersIDP_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserBase"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/login/usersIDP":{"post":{"summary":"Login Idp","description":"Verify user is logged in through IDP and return token.","operationId":"login_idp_users_login_usersIDP_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users/transactions":{"get":{"summary":"Get Transactions","description":"Get all transactions.","operationId":"get_transactions_users_transactions_get","parameters":[{"required":false,"schema":{"title":"Wallet Address","type":"string"},"name":"wallet_address","in":"query"},{"required":false,"schema":{"title":"Minimum","type":"number","default":0.0},"name":"minimum","in":"query"},{"required":false,"schema":{"title":"Offset","type":"integer","default":0},"name":"offset","in":"query"},{"required":false,"schema":{"title":"Limit","type":"integer","default":10},"name":"limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{_id}":{"get":{"summary":"Get One","description":"Retrieve details for users with specified id.","operationId":"get_one_users___id__get","parameters":[{"required":true,"schema":{"title":" Id","type":"integer"},"name":"_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"summary":"Patch User","description":"Update user data.","operationId":"patch_user_users___id__patch","parameters":[{"required":true,"schema":{"title":" Id","type":"integer"},"name":"_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/wallet":{"get":{"summary":"Get User Wallet","description":"Retrieve wallet for users with specified id.","operationId":"get_user_wallet_users__user_id__wallet_get","parameters":[{"required":true,"schema":{"title":"User Id","type":"integer"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/wallet/balance":{"get":{"summary":"Get Wallet Balance","description":"Retrieve wallet balance for user with specified id.","operationId":"get_wallet_balance_users__user_id__wallet_balance_get","parameters":[{"required":true,"schema":{"title":"User Id","type":"integer"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"summary":"Add Balance","description":"Add balance to a user wallet.","operationId":"add_balance_users__user_id__wallet_balance_patch","parameters":[{"required":true,"schema":{"title":"User Id","type":"integer"},"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BalanceBonus"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/deposit":{"post":{"summary":"Make Payment","description":"Transfer specified money amount between specified users.","operationId":"make_payment_users_deposit_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users/extraction":{"post":{"summary":"Make Outside Payment","description":"Transfer specified money amount to an outside account.","operationId":"make_outside_payment_users_extraction_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users/status/{_id}":{"patch":{"summary":"Change Status","description":"Invert blocked status of a user.\n\nOnly admins allowed, can't block other admins","operationId":"change_status_users_status___id__patch","parameters":[{"required":true,"schema":{"title":" Id","type":"integer"},"name":"_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/recovery/{username}":{"post":{"summary":"Password Recovery","description":"Request auth service to start password recovery for user_id.","operationId":"password_recovery_users_recovery__username__post","parameters":[{"required":true,"schema":{"title":"Username","type":"string"},"name":"username","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/followed":{"get":{"summary":"Get Followed Users","description":"Retrieve all users followed by user with specified id.","operationId":"get_followed_users_users__user_id__followed_get","parameters":[{"required":true,"schema":{"title":"User Id","type":"integer"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/followers":{"get":{"summary":"Get User Followers","description":"Retrieve all users followed by user with specified id.","operationId":"get_user_followers_users__user_id__followers_get","parameters":[{"required":true,"schema":{"title":"User Id","type":"integer"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/followed/{_id}":{"post":{"summary":"Follow User","description":"Retrieve all users followed by user with specified id.","operationId":"follow_user_users__user_id__followed___id__post","parameters":[{"required":true,"schema":{"title":" Id","type":"integer"},"name":"_id","in":"path"},{"required":true,"schema":{"title":"User Id","type":"integer"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Stop Following User","description":"Retrieve all users followed by user with specified id.","operationId":"stop_following_user_users__user_id__followed___id__delete","parameters":[{"required":true,"schema":{"title":" Id","type":"integer"},"name":"_id","in":"path"},{"required":true,"schema":{"title":"User Id","type":"integer"},"name":"user_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admins":{"get":{"summary":"Get Admins","description":"Return all administrators.","operationId":"get_admins_admins_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}},"post":{"summary":"Add Admin","description":"Create an admin.","operationId":"add_admin_admins_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminCreationDTO"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admins/login":{"post":{"summary":"Admin Login","description":"Login as administrator. Return token if successful.","operationId":"admin_login_admins_login_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/users/healthcheck/":{"get":{"summary":"Health Check","description":"Check for how long has the service been running.","operationId":"health_check_users_healthcheck__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheckDto"}}}}}}},"/users/locations/":{"get":{"summary":"Get Locations","description":"Return CABA locations. Coordinates format (longitude, latitude).","operationId":"get_locations_users_locations__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Get Locations Users Locations  Get","type":"array","items":{"$ref":"#/components/schemas/Location"}}}}}}}}},"components":{"schemas":{"AdminCreationDTO":{"title":"AdminCreationDTO","required":["username","password","email"],"type":"object","properties":{"username":{"title":"Username","type":"string"},"password":{"title":"Password","type":"string"},"email":{"title":"Email","type":"string"}},"description":"Data necessary to create an admin."},"BalanceBonus":{"title":"BalanceBonus","required":["amount"],"type":"object","properties":{"amount":{"title":"Amount","type":"number"}},"description":"Data necessary to transfer money from contract to user."},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"HealthCheckDto":{"title":"HealthCheckDto","required":["uptime"],"type":"object","properties":{"uptime":{"title":"Uptime","type":"number"}},"description":"HeathCheck endpoint response model."},"Location":{"title":"Location","required":["location","coordinates"],"type":"object","properties":{"location":{"title":"Location","type":"string"},"coordinates":{"title":"Coordinates","maxItems":2,"minItems":2,"type":"array","items":[{"type":"number"},{"type":"number"}]}},"description":"A location. Coordinates format (longitude, latitude)."},"UserBase":{"title":"UserBase","required":["email","username","name","surname","height","weight","birth_date","location","registration_date","is_athlete"],"type":"object","properties":{"email":{"title":"Email","type":"string"},"username":{"title":"Username","type":"string"},"name":{"title":"Name","type":"string"},"surname":{"title":"Surname","type":"string"},"height":{"title":"Height","type":"number"},"weight":{"title":"Weight","type":"integer"},"birth_date":{"title":"Birth Date","type":"string"},"location":{"title":"Location","type":"string"},"coordinates":{"title":"Coordinates","maxItems":2,"minItems":2,"type":"array","items":[{"type":"number"},{"type":"number"}]},"registration_date":{"title":"Registration Date","type":"string"},"is_athlete":{"title":"Is Athlete","type":"boolean"},"image":{"title":"Image","type":"string"}},"description":"User details."},"UserCreate":{"title":"UserCreate","required":["email","username","name","surname","height","weight","birth_date","location","registration_date","is_athlete","password"],"type":"object","properties":{"email":{"title":"Email","type":"string"},"username":{"title":"Username","type":"string"},"name":{"title":"Name","type":"string"},"surname":{"title":"Surname","type":"string"},"height":{"title":"Height","type":"number"},"weight":{"title":"Weight","type":"integer"},"birth_date":{"title":"Birth Date","type":"string"},"location":{"title":"Location","type":"string"},"coordinates":{"title":"Coordinates","maxItems":2,"minItems":2,"type":"array","items":[{"type":"number"},{"type":"number"}]},"registration_date":{"title":"Registration Date","type":"string"},"is_athlete":{"title":"Is Athlete","type":"boolean"},"image":{"title":"Image","type":"string"},"password":{"title":"Password","type":"string"}},"description":"Required for creating a new user, password + details."},"UserUpdate":{"title":"UserUpdate","type":"object","properties":{"username":{"title":"Username","type":"string"},"name":{"title":"Name","type":"string"},"surname":{"title":"Surname","type":"string"},"height":{"title":"Height","type":"number"},"weight":{"title":"Weight","type":"integer"},"birth_date":{"title":"Birth Date","type":"string"},"location":{"title":"Location","type":"string"},"coordinates":{"title":"Coordinates","maxItems":2,"minItems":2,"type":"array","items":[{"type":"number"},{"type":"number"}]}},"description":"User details to be updated."},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}}}}}